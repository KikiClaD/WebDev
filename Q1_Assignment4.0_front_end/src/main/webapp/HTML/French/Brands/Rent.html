<!DOCTYPE html>
<!-- Language of the page in french -->
<html lang="fr">
	<head>
		<!-- Title of the page + CSS link + FONT link + Responsive Web design + Javascript -->
		<title>Luxury Car Rental Killian DECHAMPS</title> 
		<link rel="website icon" type="png" href="..\..\..\Images\Logos\Logo1.PNG">
		<link rel="stylesheet" href="..\..\..\Css\Style.css">
		<link rel="stylesheet" href="..\..\..\Css\NavigationBarFr.css">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.2.0/css/all.css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
		<script src="..\..\..\Javascript\DbRentFR.js"></script>
		<script src="..\..\..\Javascript/LoggedIn.js"></script>
	</head>
	<body>
		<!--Start of the page -->
		<section class="page">
         
			<!-- First line of the topper -->
            <section class="first">
               <!-- Language choice with a dropdown button -->
               <div class="language">
                  <!-- &#xxxx to create the down arrow -->
                 <button class="language-dropdown">Fran&#231;ais &#9662</button>
                    <div class="choice-language">
                     <!-- Link -->
                      <a href="..\..\..\HTML\English\Brands\Rent.html">English</a>
                      <a href="..\..\..\HTML\French\Brands\Rent.html">Fran&#231;ais</a>
                    </div>
               </div>
               <!-- Buttons to login or register with link -->
               <div class="nav-buttons">
                  <a href="..\..\..\HTML\French\Login.html"><button id="logButton" class="login">Se connecter</button></a>
                  <a href="..\..\..\HTML\French\Register.html"><button id="regButton" class="Sign-UP">Cr&#233;er un compte</button></a>
                  <a href="..\..\..\HTML\French\MyAccount.html"><button id="accountButton" class="Sign-UP"></button></a>  
                  <button type="button" id="logout">Se d&#233;connecter</button>
               </div>
            </section>
            <!-- End of the first line of the topper -->

            <!-- Second line of the topper -->
            <section class="second">
               <!-- Image with a link when you click on it -->
               <a href="..\..\..\HTML\French\indexFR.html"><img class="logo" src="..\..\..\Images\Logos\Logo.PNG" alt="Company logo"></a>
               <!-- Main Title of the page -->
               <h1 class="title"><span class="blue">LUXURY </span><span class="white">CAR </span><span class="red">RENTAL</span></h1>
               <!-- Social networks images with links -->
               <div class="social-network">
                  <p class="horizontal"><a href="https://www.linkedin.com/feed/?hl=fr" target="_blank"><img class="social-logo" src="..\..\..\Images\Logos\Linkedin.png" alt="Linkedin logo"></a></p>
                  <p class="horizontal"><a href="https://www.youtube.com/results?search_query=test+drive+supercars+" target="_blank"><img class="social-logo" src="..\..\..\Images\Logos\Youtube.png" alt="Youtube logo"></a></p>
               </div>
            </section>
            <!-- End of the second line of the topper -->

            <!-- Start of the navigation bar -->
            <!-- Logo of the navagation bar button -->
		      <div class="btn">
		         <span class="fas fa-bars"></span>
		      </div>
		      <!-- Navigation bar -->
		      <nav class="sidebar">
		         <div class="text">
		            Menu
		         </div>
		         <!-- List of navigation bar elements -->
		         <ul>
		            <li><a href="..\..\..\HTML\French\indexFR.html">Accueil <i id="accueilFr" class="fa-solid fa-house"></i></a></li>
		            <li><a href="..\..\..\HTML\French\MyAccount.html">Mon compte <i id="compteFr" class="fa-solid fa-user"></i></a></li>
		            <li><a href="..\..\..\HTML\French\Brands\MyReservation.html">Mes r&#233;servations <i id="reservationFr" class="fa-solid fa-clipboard-list"></i></a></li>
		            <li>
		               <p class="feat-btn" id="active">Marques 
		               <span class="fas fa-caret-down two"></span>
		               </p>
		               <!-- Sub-list of navigation bar items -->
		               <ul class="feat-show">
		                  <li ><a class="active" href="..\..\..\HTML\French\Brands\Brands.html">Marques</a></li>
		                  <li><a class="other" href="..\..\..\HTML\French\Brands\AstonMartin\AstonMartin.html">Aston Martin</a></li>
		                  <li><a class="other" href="..\..\..\HTML\French\Brands\Bugatti\Bugatti.html">Bugatti</a></li>
		                  <li><a class="other" href="..\..\..\HTML\French\Brands\Ferrari\Ferrari.html">Ferrari</a></li>
		                  <li><a class="other" href="..\..\..\HTML\French\Brands\Lamborghini\Lamborghini.html">Lamborghini</a></li>
		                  <li><a class="other" href="..\..\..\HTML\French\Brands\McLaren\McLaren.html">McLaren</a></li>
		                  <li><a class="other" href="..\..\..\HTML\French\Brands\Porsche\Porsche.html">Porsche</a></li>
		               </ul>
		            </li>
		            <li><a href="..\..\..\HTML\French\Blog.html">Blog <i id="blogFr" class="fa-brands fa-blogger-b"></i></a></li>
		            <li><a href="..\..\..\HTML\French\Contact.html">Contact <i id="contactFr" class="fa-solid fa-address-card"></i></a></li>
		         </ul>
		      </nav>
		      <!-- End of the navigation bar -->

			
			<!-- Start of the header -->
			<header>
				<!-- Main image of the page -->
            <img class="photo" src="..\..\..\Images\Pres.png" alt="Main image"></a>

				<!-- Register form -->
				<form id="rentform" method="POST" class="rentReg">
					<!-- Text -->
					<h1 class="Rent">Louer une voiture</h1>
					<!-- Rental form with select and input -->
				   <input id="id" type="text" placeholder="Num&#233;ro de r&#233;servation">
				   <select id="car">
						<option selected value="">-- Choisir une voiture --</option>
						<option value="Aston Martin DBX">Aston Martin DBX</option>
						<option value="Aston Martin Vanquish Zagato">Aston Martin Vanquish Zagato</option>
						<option value="Aston Martin Vantage F1 Edition">Aston Martin Vantage F1 Edition</option>
						<option value="Buggati Chiron">Buggati Chiron</option>
						<option value="Buggati Divo">Buggati Divo</option>
						<option value="Bugatti Veyron">Bugatti Veyron</option>
						<option value="Ferrari 488">Ferrari 488</option>
						<option value="Ferrari 488 Pista">Ferrari 488 Pista</option>
						<option value="Ferrari SF90">Ferrari SF90</option>
						<option value="Lamborghini AventadorSVJ">Lamborghini Aventador SVJ</option>
						<option value="Lamborghini HuracanSTO">Lamborghini Huracan STO</option>
						<option value="Lamborghini Urus">Lamborghini Urus</option>
						<option value="McLaren 570S">McLaren 570S</option>
						<option value="McLaren 600LT">McLaren 600LT</option>
						<option value="McLaren 765LT">McLaren 765LT</option>
						<option value="Porsche 718 Spyder">Porsche 718 Spyder</option>
						<option value="Porsche 911 GT3RS">Porsche 911 GT3RS</option>
						<option value="Porsche 911 TurboS">Porsche 911 TurboS</option>
					</select>
				   <input id="surname" type="text" placeholder="Nom de famille">
				   <input id="firstname" type="text" placeholder="Pr&#233;nom">
				   <input type="Email" id="email" placeholder="Email">
					<input type="Mobile" id="mobile" placeholder="T&#233;l&#233;phone">
					<label id="dateDeparture">Date de d&#233;part</label><br>
					<input type="date" id="dateD" placeholder="Date de d&#233;part">
					<label id="dateReturn">Date de retour</label><br>				
					<input type="date" id="dateR" placeholder="Date de retour">	
					<input type="Comment" id="comment" placeholder="Commentaire">
					<select id="cityD">
						<option selected value="">-- Ville de d&#233;part --</option>
						<option value="Dublin">Dublin</option>
						<option value="Cork">Cork</option>
						<option value="Limerick">Limerick</option>
						<option value="Galway">Galway</option>
						<option value="Waterford">Waterford</option>
						<option value="Swords">Swords</option>
					</select>
					<select id="cityR">
						<option selected value="">-- Ville de retour --</option>
						<option value="Dublin">Dublin</option>
						<option value="Cork">Cork</option>
						<option value="Limerick">Limerick</option>
						<option value="Galway">Galway</option>
						<option value="Waterford">Waterford</option>
						<option value="Swords">Swords</option>
					</select>
				   <div align="center">
						<button class="create" id="bouton" name="submit" type="submit">Faire une r&#233;servation</button>
					</div>
				</form>
				<h1 class="quoteInfo" id="h1"></h1>
			</header>
			<!-- End of the header -->

			<script>

				/*Retrieve the object from storage*/
				const local2 = JSON.parse(localStorage.getItem("userRent"));

				/*If there is something on the local storage*/
				if(local2 != null)
				{
					 carRent.style.display = "none";
					 surnameRent.style.display = "none";
					 firstnameRent.style.display = "none";
					 emailRent.style.display = "none";
					 mobileRent.style.display = "none";
					 dateDepartureRent.style.display = "none";
					 dateReturnRent.style.display = "none";
					 commentRent.style.display = "none";
					 cityDepartureRent.style.display = "none";
					 cityReturnRent.style.display = "none";
					 dateDeparture.style.display = "none";
					 dateReturn.style.display = "none";
				  
				    bouton.style.display = "none";
				    /*We had a text on the web page*/
				    h1.textContent = `Bonjour ${local2.surnameRent} ${local2.firstnameRent} votre reservation a bien ete prise en compte`

				}
				/*If there is nothing on the local storage*/
				else
				{
					clearReserv.style.display = "none";
					myReservation.style.display = "none";
				    
				    /*When the user click on the button*/
				    bouton.onclick = () => {
				        const user = {
				             /*We save all those value*/
				             carRent: carRent.value,
				            surnameRent: surnameRent.value,
				            firstnameRent: firstnameRent.value,
				            emailRent: emailRent.value,
				            mobileRent: mobileRent.value,
				            dateDepartureRent: dateDepartureRent.value,
				            dateReturnRent: dateReturnRent.value,
				            commentRent: commentRent.value,
				            cityDepartureRent: cityDepartureRent.value,
				            cityReturnRent: cityReturnRent.value
				        };
				        /*We set the item "user" with the value on the top*/
				        localStorage.setItem("userRent",JSON.stringify(user))

				        /*We have the verification if the form is well filled*/
				        if (ValidateCar(carRent)) 
					            {
					        if (ValidateSurname(surnameRent, 2)) 
					            {
					            	if (ValidateFirstname(firstnameRent, 2)) 
					            		{
				                			if(ValidateEmail(emailRent))
				                    			{
				                        		if(ValidateMobile(mobileRent, 8))
				                        			{
				                        				if(ValidateDepartureDate(dateDepartureRent))
				                            				{
								                                if(ValidateReturnDate(dateReturnRent))
								                                {
								                                	if(ValidateComment(commentRent, 30))
								                                	{
									                                    if(ValidateDepartureCity(cityDepartureRent))
									                                    {
									                                        if(ValidateReturnCity(cityReturnRent))
									                                        {

									                                    /*If yes, we create a variable for the .txt file*/
									                                    let data = 
											                            'Voiture: ' + carRent.value + ' \r\n' + 
											                            'Nom de famille: ' + surnameRent.value + ' \r\n' + 
									                                    'Prenom: ' + firstnameRent.value + ' \r\n' + 
									                                    'Email: ' + emailRent.value + ' \r\n' +
									                                    'Telephone: ' + mobileRent.value + ' \r\n' +
									                                    'Date de depart: ' + dateDepartureRent.value + ' \r\n' +
									                                    'Date de retour: ' + dateReturnRent.value + ' \r\n' +
									                                    'Commentaire: ' + commentRent.value + ' \r\n' +
									                                    'Ville de depart: ' + cityDepartureRent.value + ' \r\n' +
									                                    'Ville de retour: ' + cityReturnRent.value;
									        
									                                    // Convert the text to BLOB.
									                                    const textToBLOB = new Blob([data], { type: 'text/plain' });
									                                    const sFileName = 'FormulaireLocation.txt';      // The file to save the data.

									                                    let newLink = document.createElement("a");
									                                    newLink.download = sFileName;

									                                    if (window.webkitURL != null) {
									                                        newLink.href = window.webkitURL.createObjectURL(textToBLOB);
									                                    }
									                                    else {
									                                        newLink.href = window.URL.createObjectURL(textToBLOB);
									                                        newLink.style.display = "none";
									                                        document.body.appendChild(newLink);
									                                    }
									                                    newLink.click(); 
									                                    document.location.reload();
									                                 }
									                              }
									                           }
									                        }
									                     }
									                  }
									               }
									            }                   
									        }
									    }

				    				return false;
					};
			}

/*Button to "disconnect the account", in reality to clear the local storage*/
clearReserv.onclick = () =>
{
    localStorage.clear();
    document.location.reload();
}


/****************************START FUNCTION VALIDATE FORM************************************/

/*Validate departure date*/
function ValidateCar(carRent)
{ 
    if(carRent.value) //if there is a value for the departure date
    {
        return true;
    }
    else //if there is no value for the departure date
    {
        alert('Choose a car');
        localStorage.clear();
        carRent.focus();
        return false;
    }
}

/*Validate surname*/
function ValidateSurname(surnameRent,my)
{ 
    var letters = /^[A-Za-z]+$/; //variable including all the letters
    var surnameRent_len = surnameRent.value.length; //variable with the length of the surname
    if(!surnameRent.value.match(letters))//if there are other caracter than letters in the surname
    {
        alert('Please input alphabet characters only');
        surnameRent.focus();
        localStorage.clear();
        return false;
    }
    else if(surnameRent_len < my) //if the surname size is less than 2 letters
    {
        alert("It should not be empty / length be more than " +my);
        surnameRent.focus();
        localStorage.clear();
        return false;
    }
    else //if all is good
    {
        return true;
    }
}

/*Validate firstname*/
function ValidateFirstname(firstnamerent,my)
{ 
    var letters = /^[A-Za-z]+$/; //variable including all the letters
    var firstnameRent_len = firstnameRent.value.length; //variable with the length of the firstname
    if(!firstnameRent.value.match(letters))//if there are other caracter than letters in the firstname
    {
        alert('Please input alphabet characters only');
        firstnameRent.focus();
        localStorage.clear();
        return false;
    }
    else if(firstnameRent_len < my) //if the firstname size is less than 2 letters
    {
        alert("It should not be empty / length be more than " +my);
        firstnameRent.focus();
        localStorage.clear();
        return false;
    }
    else //if all is good
    {
        return true;
    }
}

/*Validate email*/
function ValidateEmail(email)
{
    var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/; //mail aspect request
    if(emailRent.value.match(mailformat)) //if the email format is respected
    {
        return true;
    }
    else if(!emailRent) //if there is no value for the email
    {
        alert("Please input your email");
        localStorage.clear();
        emailRent.focus();
        return false;
    }
    else //if the email format is not respected
    {
        alert("You have entered an invalid email address!");
        localStorage.clear();
        emailRent.focus();
        return false;
    }
}

/*Validate mobile*/
function ValidateMobile(mobile,my)
{ 
    var numbers = /^[0-9]+$/; //variable with all the numbers
    var mobileRent_len = mobileRent.value.length; //variable with the length of the mobile
    if(!mobile.value.match(numbers)) //if there are only numbers
    {
        alert('Please input numeric characters only');
        localStorage.clear();
        mobileRent.focus();
        return false;
    }
    else if(mobileRent_len < my) //if the mobile size is less than 2 letters
    {
        alert("It should not be empty / length be more than " +my);
        localStorage.clear();
        mobileRent.focus();
        return false;
    }
    else //if there are other caracter wich are not numbers for the mobile
    {
        return true;
    }
}

/*Validate departure date*/
function ValidateDepartureDate(dateDepartureRent)
{ 
    if(dateDepartureRent.value) //if there is a value for the departure date
    {
        return true;
    }
    else //if there is no value for the departure date
    {
        alert('Enter a departure date');
        localStorage.clear();
        dateDepartureRent.focus();
        return false;
    }
}

/*Validate return date*/
function ValidateReturnDate(dateReturnRent) 
 { 
    if(dateReturnRent.value) //if there is a value for the return date
    {
        return true;
    }
    else //if there is no value for the return date
    {
        alert('Enter a return date');
        localStorage.clear();
        dateReturnRent.focus();
        return false;
    }
}

/*Validate comment*/
function ValidateComment(commentRent,my)
{ 
    var commentRent_len = commentRent.value.length; //variable with the length of the comment
    if(commentRent_len > my) //if the comment size is more than 30 letters
    {
        alert("Comment length should be less than " +my);
        commentRent.focus();
        localStorage.clear();
        return false;
    }
    else //if all is good
    {
        return true;
    }
}

/*Validate departure city*/
function ValidateDepartureCity(cityDepartureRent)
 { 
    if(cityDepartureRent.value) //if there is a value for the departure city
    {
        return true;
    }
    else //if there is no value for the departure city
    {
        alert('Enter a departure city');
        localStorage.clear();
        cityDepartureRent.focus();
        return false;
    }
}

/*Validate return city*/
function ValidateReturnCity(cityReturnRent)
 { 
    if(cityReturnRent.value) //if there is a value for the return city
    {
        return true;
    }
    else //if there is no value for the return city
    {
        alert('Enter a return city');
        localStorage.clear();
        cityReturnRent.focus();
        return false;
    }
}
			</script>


			<!-- Start of the footer of page -->
			<footer>
				<!-- Create different columns for the footer page -->
				<div class="columns">
					<!-- Each columns has link to other page -->
					<div class="column">
						<h2>Liens</h2>
						<p><a href="..\..\..\HTML\French\indexFR.html"><button>Accueil</button></a></p>
						<p><a href="..\..\..\HTML\French\Register.html"><button>Cr&#233;er un compte</button></a></p>
						<p><a href="..\..\..\HTML\French\Login.html"><button>Se connecter</button></a></p>
					</div>
					<div class="column">
						<h2>Informations</h2>
						<p><a href="..\..\..\HTML\French\Cookies.html"><button>Cookies</button></a></p>
					</div>
					<div class="column">
						<h2>Besoin d'aide ?</h2>
						<p><a href="..\..\..\HTML\French\Contact.html"><button>Nous contacter</button></a></p>
					</div>
				</div>
				<h5 class="id">Killian DECHAMPS, DCU</h5>
			</footer>
			<!-- End of the footer of page -->

		</section>
		<!-- End of the page -->


		<!-- Calls javascript functions present in the jquery library for the navigation bar -->
		<script>
         $('.btn').click(function(){
           $(this).toggleClass("click");
           $('.sidebar').toggleClass("show");
         });
           $('.feat-btn').click(function(){
             $('nav ul .feat-show').toggleClass("show");
           });
           $('.serv-btn').click(function(){
             $('nav ul .serv-show').toggleClass("show1");
           });
           $('nav ul li').click(function(){
             $(this).addClass("active").siblings().removeClass("active");
           });
      </script>
	</body>
</html>